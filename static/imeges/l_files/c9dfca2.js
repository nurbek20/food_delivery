(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{502:function(t,o,e){var content=e(505);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(13).default)("2289ad49",content,!0,{sourceMap:!1})},504:function(t,o,e){"use strict";e(502)},505:function(t,o,e){var n=e(12)(!1);n.push([t.i,'.bk-dish-card .bk-price{font:500 18px/140% Rotonda}.bk-dish-card{display:flex;flex-direction:column;position:relative}@media(hover:hover){.bk-dish-card{align-items:center;text-align:center;border-radius:20px;padding:30px}.bk-dish-card:hover{background-color:#fff}.bk-dish-card:hover:after{opacity:1}.bk-dish-card:hover .bk-price{color:#fff}.bk-dish-card:after{font:500 16px/120% Rotonda;content:"Подробнее";opacity:0;color:#d62300;margin-top:15px}}.bk-dish-card .bk-price{margin-top:15px;background:#ff8720;color:#f5ebdc;border-radius:20px;padding:6px 20px}@media(max-width:767px){.bk-dish-card{padding:0 16px 10px;border-bottom:1px solid #d7c7b5;display:grid;grid-template-columns:130px 1fr;align-items:center;grid-gap:0 12px;gap:0 12px}.bk-dish-card .bk-price{font:500 14px/120% Rotonda;align-self:flex-start;width:-webkit-max-content;width:-moz-max-content;width:max-content}}.bk-dish-card__image{width:220px;height:220px;background-size:contain;background-position:50%;background-repeat:no-repeat}@media(max-width:767px){.bk-dish-card__image{width:130px;height:130px;grid-row:span 3}}.bk-dish-card__title{font-size:20px;line-height:120%;flex-grow:1}@media(max-width:767px){.bk-dish-card__title{align-self:flex-end;font-weight:400}}.bk-dish-card__description{display:none}@media(max-width:767px){.bk-dish-card__description{display:block;font:12px/14px Rotonda;color:#87604f}}.bk-dish-card__count{position:absolute;top:5px;left:5px;display:flex;align-items:center;justify-content:center;background-color:#502314;color:#f5ebdc;width:64px;height:64px;border-radius:64px;font-size:26px}@media(max-width:767px){.bk-dish-card__count{width:32px;height:32px;border-radius:50%;top:auto;left:16px;bottom:16px;font-size:18px;line-height:22px}}',""]),t.exports=n},509:function(t,o,e){"use strict";var n=e(26),r=(e(6),e(73),e(46),e(118),e(120),e(50),e(28),e(334),e(121),e(64),e(39),e(4),e(102),{props:["item","highlightText","categoryId","subCategoryId"],computed:{image:function(){var t=this.item,o=t.kiosk_image,e=t.image_256,r=t.dishes,image=o||e;if(!image&&r){var c=Object(n.a)(r,1)[0];image=null==c?void 0:c.image_256}return image},shortDescription:function(){var t=this.item.description,o=(t||"").split(" ");return o.length>11?"".concat(o.slice(0,11).join(" "),"..."):t},name:function(){var t=this.highlightText,o=this.item.name,e=new RegExp(t,"gi");return t?o.replace(e,(function(t){return"<span>".concat(t,"</span>")})):o},category:function(){var t=this.$store,o=this.$route,e=t.getters["menu/categories"];if(e)return e.find((function(t){return t.id==o.params.id}))},countInCart:function(){var t=this.$store,o=this.item;return t.state.ordering.order.dishes.reduce((function(t,e){return e.dish.id!==o.id?t:t+e.order.count}),0)}},components:{Price:e(47).a},methods:{createDishOrder:function(){var t=this.$gtm,o=this.item,e=this.category,n=this.createOrder,r=this.$route,c=this.$modal,d=this.categoryId,l=this.subCategoryId,source=r.name,m=this.$store.state.receives,h=m.restaurant,address=m.address,x=m.deliveryInfo;t.sendEvent({event:"gtm-ee-event",eventCategory:"product listing",eventAction:"".concat("index"==source?"coupon":"product"," click"),eventLabel:"".concat(o.name," | ").concat(o.id),additionalFields:{ecommerce:{actionField:{action:"click",list:"Главная. ".concat((null==e?void 0:e.name)||"Купоны")},products:[{dimension6:o.crowns?"crowns":"normal",id:o.id,name:o.name,price:parseFloat((o.price/100).toFixed(2)),quantity:1,variant:null!=e&&e.name?"product":"coupon"}]}}}),h||address&&2!=(null==x?void 0:x.status)?n(o,source,d,l):c("receive-types")}}}),c=(e(504),e(1)),component=Object(c.a)(r,(function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"bk-dish-card",class:{"bk-dish-card--grouped":t.item.is_group},on:{click:t.createDishOrder}},[e("div",{staticClass:"bk-dish-card__image",style:{"background-image":"url("+t.image+")"}}),t._v(" "),e("div",{staticClass:"bk-dish-card__title",domProps:{innerHTML:t._s(t.item.is_group&&t.item.size_name?t.item.size_name:t.name)}}),t._v(" "),e("div",{staticClass:"bk-dish-card__description"},[t._v("\n    "+t._s(t.shortDescription)+"\n  ")]),t._v(" "),t.countInCart?e("div",{staticClass:"bk-dish-card__count"},[t._v("\n    "+t._s(t.countInCart)+"\n  ")]):t._e(),t._v(" "),t.item.price?e("price",{attrs:{price:t.item.price}}):t._e()],1)}),[],!1,null,null,null);o.a=component.exports},519:function(t,o,e){var content=e(557);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,e(13).default)("75b73fbe",content,!0,{sourceMap:!1})},555:function(t,o,e){e(9),e(6),e(7),e(10),e(5),e(11);var n=e(18),r=e(19),c=["class","staticClass","style","staticStyle","attrs"];function d(object,t){var o=Object.keys(object);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(object);t&&(e=e.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),o.push.apply(o,e)}return o}e(4),t.exports={functional:!0,render:function(t,o){var e=o._c,data=(o._v,o.data),l=o.children,m=void 0===l?[]:l,h=data.class,x=data.staticClass,style=data.style,_=data.staticStyle,f=data.attrs,k=void 0===f?{}:f,v=r(data,c);return e("svg",function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(o){n(t,o,source[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(source,o))}))}return t}({class:[h,x],style:[style,_],attrs:Object.assign({width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},k)},v),m.concat([e("path",{attrs:{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"#87604f",d:"M15.5795 12.8251L18.8509 15.3226C19.7431 16.3103 19.7431 17.7917 18.8509 18.7793C17.8596 19.7669 16.3726 19.7669 15.3813 18.7793L12.1099 16.2818C10.9203 16.8743 9.5325 17.2694 8.14465 17.2694C3.48545 17.2694 0.480042 13.5165 0.480042 8.87469C0.480042 4.23291 3.48545 0.479992 8.14465 0.479992C12.8039 0.479992 16.5709 4.23291 16.5709 8.87469C16.5709 10.2573 16.1743 11.64 15.5795 12.8251ZM2.46269 8.87469C2.46269 12.4301 4.57591 15.2942 8.14466 15.2942C11.7134 15.2942 14.5882 12.4301 14.5882 8.87469C14.5882 5.31929 11.7134 3.97842 8.14466 3.97842C4.57591 3.97842 2.46269 5.31929 2.46269 8.87469Z"}})]))}}},556:function(t,o,e){"use strict";e(519)},557:function(t,o,e){var n=e(12)(!1);n.push([t.i,'.bk-coupons-personal__button,.bk-coupons__search-button{background-color:#502314;border-radius:50px;padding:14px 19px;font-size:16px;line-height:18px;text-align:center;color:#f5ebdc;border:1px solid #502314;cursor:pointer}.bk-coupons__search-button--disabled{pointer-events:none;background-color:#d7c7b4;border-color:#d7c7b4}.bk-coupons-common__title,.bk-coupons-personal__title{font-size:60px;line-height:100%}.bk-coupons-personal__hint{font:500 18px/140% Rotonda}.bk-coupons{margin:62px 0 100px}.bk-coupons .bk-dish-card{display:grid;grid-template-columns:1fr -webkit-max-content;grid-template-columns:1fr max-content;grid-auto-rows:-webkit-max-content;grid-auto-rows:max-content;border-radius:30px;padding:14px;background-color:#fff;align-items:flex-start;justify-content:flex-start;grid-gap:0 4px;gap:0 4px}.bk-coupons .bk-dish-card:after{content:"";position:relative;order:1;width:calc(100% + 28px);border-top:2px dashed #fa0;z-index:0;opacity:1;grid-column:span 2;margin:14px 0 0 -14px;flex-grow:1}.bk-coupons .bk-dish-card:hover .bk-price{color:#845f50}.bk-coupons .bk-dish-card .bk-price{order:3;margin:0;color:#845f50;white-space:nowrap;padding:14px 14px 0 0;background-color:transparent}@media(max-width:767px){.bk-coupons .bk-dish-card{border-radius:8px;padding:4px}.bk-coupons .bk-dish-card:after{width:calc(100% + 8px);margin:8px 0 0 -4px}.bk-coupons .bk-dish-card .bk-price{font:500 12px/16px Rotonda;padding:8px 8px 0 0}}.bk-coupons .bk-dish-card__title{font:20px/100% Rotonda;padding:15px 70px 15px 15px;width:100%;order:2;text-align:left;flex-grow:1}@media(max-width:767px){.bk-coupons .bk-dish-card__title{font:500 12px/16px Rotonda;padding:8px}}.bk-coupons .bk-dish-card__description{display:none}.bk-coupons .bk-dish-card__image{width:100%;height:auto;padding-bottom:64.5%;border-radius:10px;overflow:hidden;grid-column:span 2;order:0}@media(max-width:767px){.bk-coupons .bk-dish-card__image{border-radius:8px}}@media(max-width:767px){.bk-coupons{margin:30px 0 50px}}.bk-coupons__search{max-width:800px;display:flex;grid-gap:10px;gap:10px}@media(max-width:767px){.bk-coupons__search{margin:0 16px}}.bk-coupons__search-button{width:100px;height:48px}.bk-coupons__search-button svg path{fill:#f5ebdc}.bk-coupons-common,.bk-coupons-personal{margin:35px 16px 0}.bk-coupons-common__title,.bk-coupons-personal__title{font-weight:700}@media(max-width:767px){.bk-coupons-common__title,.bk-coupons-personal__title{font-size:32px;line-height:110%}}.bk-coupons-common__list,.bk-coupons-personal__list{margin-top:60px;display:grid;grid-template-columns:repeat(3,1fr);grid-gap:60px 32px;gap:60px 32px;padding-bottom:15px}@media(max-width:767px){.bk-coupons-common__list,.bk-coupons-personal__list{margin-top:16px;display:block}}@media(max-width:767px){.bk-coupons-personal__list{display:grid;grid-template-columns:repeat(2,1fr);grid-gap:20px 15px;gap:20px 15px;padding-top:0}}.bk-coupons-personal__list .bk-dish-card:before{position:relative;background:#fff;padding:2px 5px;content:"для тебя";height:10px;width:auto;font-weight:700;font-size:6px;text-transform:uppercase;color:#d62300;order:1;align-self:flex-start;z-index:1;grid-column:span 2;width:40px;margin:14px 0 -19px}.bk-coupons-personal__list .bk-dish-card:after{border-color:#d62300}@media(max-width:767px){.bk-coupons-personal__list .bk-dish-card:before{margin:8px 0 -13px}}.bk-coupons-personal__list .bk-dish-card__title{padding:15px;grid-column:span 2}@media(max-width:767px){.bk-coupons-personal__list .bk-dish-card__title{padding:8px}}@media(max-width:767px){.bk-coupons-common__list{display:grid;grid-template-columns:repeat(2,1fr);grid-gap:20px 15px;gap:20px 15px;padding-top:0}}.bk-coupons-personal__button{width:120px;margin-top:32px}.bk-coupons-personal__no-coupons{margin-top:40px}.bk-coupons-personal__hint{color:#87604f}',""]),t.exports=n},580:function(t,o,e){"use strict";e.r(o);e(7),e(56),e(28),e(102);var n=e(94),r=e(509),c=e(555),d=e.n(c),l="Хочешь поесть выгодно и вкусно? Тогда тебе к нам! Лучшие промокоды здесь…",m={head:function(){return{title:"КУПОНЫ",meta:[{hid:"description",name:"description",content:l},{hid:"og:description",name:"og:description",content:l},{hid:"twitter:description",name:"twitter:description",content:l}]}},data:function(){return{query:"",searchCoupons:null}},components:{BkInput:n.a,DishCard:r.a,Search:d.a},computed:{commonCoupons:function(){var t;return null===(t=this.$store.state.menu.coupons)||void 0===t?void 0:t.dishes},personalCoupons:function(){var t,o,e=this.$store.state,menu=e.menu,n=e.ordering;return null===(t=menu.personalCoupons)||void 0===t||null===(o=t.user_coupons)||void 0===o?void 0:o.list.filter((function(t){return!n.order.dishes.some((function(o){return o.order.id===t.id}))}))}},beforeMount:function(){var t=this.$store,o=this.$gtm;t.dispatch("menu/getCoupons"),t.dispatch("menu/getPersonalCoupons"),o.sendEvent({eventCategory:"coupon page",eventAction:"page show",eventNonInteraction:!0})},watch:{personalCoupons:{handler:function(t){var o=this.$gtm;null!=t&&t.length&&o.sendEvent({event:"gtm-ee-event",eventCategory:"product listing",eventAction:"coupon show",eventLabel:"Личные купоны",eventNonInteraction:!0,additionalFields:{ecommerce:{currencyCode:"RUB",impressions:t.map((function(t){return{id:t.id,list:"Личные купоны",name:t.name,price:parseFloat((t.price/100).toFixed(2)),quantity:1,dimension6:t.crowns?"crowns":"normal",variant:"product"}}))}}})},immediate:!0}}},h=m,x=(e(556),e(1)),component=Object(x.a)(h,(function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"bk-coupons"},[e("div",{staticClass:"bk-content-wrapper"},[t._e(),t._v(" "),e("div",{staticClass:"bk-coupons-personal"},[e("div",{staticClass:"bk-coupons-personal__title"},[t._v("Личные купоны")]),t._v(" "),t.personalCoupons&&t.personalCoupons.length?e("div",{staticClass:"bk-coupons-personal__list"},t._l(t.personalCoupons,(function(o){return e("dish-card",{key:o.id,attrs:{item:o,categoryId:"coupon"},nativeOn:{click:function(e){return t.$gtm.sendEvent({eventCategory:"crowns page",eventAction:"personal coupon open",eventLabel:o.name})}}})})),1):e("div",{staticClass:"bk-coupons-personal__no-coupons"},[e("div",{staticClass:"bk-coupons-personal__hint"},[t._v("\n          Купоны отсутствуют. Доступны блюда в меню.\n        ")]),t._v(" "),t.user?e("nuxt-link",{staticClass:"bk-coupons-personal__button",attrs:{tag:"div",to:{name:"index"}}},[t._v("\n          Меню\n        ")]):e("div",{staticClass:"bk-coupons-personal__button",on:{click:function(o){return t.$modal("auth")}}},[t._v("\n          Войти\n        ")])],1)]),t._v(" "),e("div",{staticClass:"bk-coupons-common"},[e("div",{staticClass:"bk-coupons-common__title"},[t._v("Общие купоны")]),t._v(" "),e("div",{staticClass:"bk-coupons-common__list"},[t.commonCoupons&&t.commonCoupons.length?t._l(t.commonCoupons,(function(t){return e("dish-card",{key:t.id,attrs:{item:t,categoryId:"coupon"}})})):t._e()],2)])])])}),[],!1,null,null,null);o.default=component.exports}}]);